# Docker swarm
**Docker Swarm** — инструмент оркестрации ([[Оркестрация]]), идущий в комплекте с _Docker_.

## Работа

Работать с Docker Swarm очень просто. Достаточно разбить узлы на две группы: менеджеры и рабочие узлы или воркеры (workers) и выполнить несколько команд.

### Основные понятия
**Менеджеры** — это узлы, которые осуществляют распределение задач (tasks) по узлам-воркерам и гарантируют непротиворечивое (консистентное) состояние их выполнения. 

*Сами задачи отвечают некоторым сервисам* — наборам реплик некоторого Docker-образа. Реплик одного Docker-образа может быть и больше одного. 

*Одна задача соответствует одной реплике*. Таким образом, менеджеры распределяют по воркерам задачи в размере суммы реплик всех запущенных сервисов, стараясь сбалансировать их по рабочей нагрузке. Когда задача отдается конкретному воркеру на выполнение, в нем стартует соответствующий образу сервиса контейнер.

![[Pasted image 20250918224625.png]]

### Основные объекты в Swarm

- **Service** — декларативное описание контейнера (образ, порты, сеть, число реплик).
- **Task** — конкретный запущенный экземпляр контейнера.
- **Overlay Network** — виртуальная сеть, объединяющая контейнеры на разных узлах.
- **Secrets/Configs** — безопасное хранение паролей и настроек.

## Как это работает внутри
1. создаёшь сервис, например:
```bash
docker service create --name web -p 80:80 nginx
```
2. Manager решает: на каком узле и в каком количестве запускать контейнеры.
3. Worker запускает контейнеры как tasks.
4. Если один контейнер падает → менеджер планирует новую задачу на доступном узле.

## Обзор
### +
- Простота (легко освоить после Docker).
- Нативная интеграция с Docker CLI.
- Легко поднять маленький кластер.
- Хорош для небольших и средних проектов.

### -
- Не так гибок и развит, как Kubernetes.
- Меньше экосистема и сообщество.
- Не подходит для очень больших и сложных систем.