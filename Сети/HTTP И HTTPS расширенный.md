## HTTP Протоколы

### Что такое HTTP
**HTTP (HyperText Transfer Protocol)** — это протокол передачи данных в сети, который используется для взаимодействия между клиентом (например, браузером) и сервером (например, веб-сервером). Он основан на модели "запрос-ответ".

---

### Понимание общего формата протокола

HTTP-сообщение состоит из **заголовков** и **тела** (не всегда). Разделение выглядит так:

1. **Заголовки (Headers)** — метаданные о запросе или ответе.
2. **Тело (Body)** — основное содержимое, которое передается в запросе или ответе (например, HTML-документ, JSON и т.д.).

Пример HTTP-запроса:
```http
GET /index.html HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/5.0
Accept: text/html

```
1. **Стартовая строка**: содержит метод запроса (`GET`), путь к ресурсу (`/index.html`), версию протокола (`HTTP/1.1`).
2. **Заголовки**: метаданные запроса, например, домен сервера (`Host`), тип клиента (`User-Agent`), формат желаемого ответа (`Accept`).
3. **Тело (Body)**: отсутствует в GET-запросе, но может присутствовать в POST или PUT.

Пример HTTP-ответа:
```http
HTTP/1.1 200 OK
Content-Type: text/html
Content-Length: 342

<html>...контент...</html>
```
1. **Стартовая строка**: версия HTTP (`HTTP/1.1`), код статуса (`200 OK`).
2. **Заголовки**: информация о типе и размере контента (`Content-Type`, `Content-Length`).
3. **Тело (Body)**: содержимое ответа, в данном случае HTML-документ.

---

### Сродниться со вкладкой Сеть/Network в инспекторе браузера

В браузере есть инструменты разработчика (DevTools), которые помогают анализировать сеть:
1. **Открой вкладку Network (Сеть)**: здесь отображаются все запросы, которые отправляются браузером к серверу.
2. **Фильтрация запросов**: ты можешь фильтровать по типу запросов (XHR, JS, CSS, HTML и т.д.).
3. **Детали запроса**: выбери запрос, и ты увидишь:
   - **Headers** — заголовки запроса и ответа.
   - **Preview/Response** — тело ответа от сервера (например, HTML, JSON).
   - **Timing** — время передачи данных (насколько быстро был выполнен запрос).

### Методы HTTP-запросов

Методы HTTP-запросов определяют тип действия, которое нужно выполнить.

#### Основные методы:
1. **GET**
   - **Назначение**: запрашивает данные с сервера.
   - **Особенности**: безопасен (не изменяет данные на сервере), может быть кэширован.
   - **Пример**: получение веб-страницы.
   
```http
GET /index.html HTTP/1.1
Host: www.example.com
```

2. **POST**
   - **Назначение**: отправка данных на сервер для обработки.
   - **Особенности**: передает данные в теле запроса, используется для создания новых ресурсов.
   - **Пример**: отправка формы на веб-сайте.

```http
POST /submit-form HTTP/1.1
Host: www.example.com
Content-Type: application/x-www-form-urlencoded

name=John&age=30
```

3. **HEAD**
   - **Назначение**: запрашивает только заголовки ресурса, без тела.
   - **Особенности**: используется для проверки доступности ресурса без загрузки контента.
   - **Пример**: проверка наличия файла на сервере.

#### Дополнительные методы:
4. **PUT**
   - **Назначение**: загружает данные на сервер и замещает существующий ресурс.
   - **Особенности**: идемпотентен (многоразовое выполнение запроса не изменяет результат).
   - **Пример**: обновление существующего ресурса (например, файла).

5. **DELETE**
   - **Назначение**: удаляет указанный ресурс на сервере.
   - **Особенности**: может быть небезопасным, если удаление необратимо.
   - **Пример**: удаление файла.

6. **PATCH**
   - **Назначение**: частичное обновление ресурса.
   - **Особенности**: в отличие от PUT, обновляет только часть данных.
   - **Пример**: изменение отдельного поля в базе данных.

---

### Коды HTTP-ответов

Коды состояния HTTP показывают результат выполнения запроса.

#### 1xx: Информационные коды
- **100 Continue** — сервер получил начальный запрос, клиент может продолжать отправлять тело.

#### 2xx: Успешные ответы
- **200 OK** — запрос успешно выполнен.
- **201 Created** — запрос привел к созданию нового ресурса.

#### 3xx: Перенаправления
- **301 Moved Permanently** — ресурс был перемещен на новый URL постоянно.
- **302 Found** — ресурс временно перемещен.

#### 4xx: Ошибки клиента
- **400 Bad Request** — некорректный запрос (например, ошибка синтаксиса).
- **401 Unauthorized** — требуется авторизация.
- **403 Forbidden** — доступ к ресурсу запрещен.
- **404 Not Found** — ресурс не найден.

#### 5xx: Ошибки сервера
- **500 Internal Server Error** — ошибка на сервере.
- **502 Bad Gateway** — сервер получил некорректный ответ от другого сервера.
- **503 Service Unavailable** — сервер временно недоступен.

---

### Заголовки HTTP

Заголовки HTTP передают дополнительную информацию о запросе или ответе. Вот несколько часто используемых заголовков:

#### Заголовки запроса:
- **Host** — указывает на домен сервера, к которому выполняется запрос.
- **User-Agent** — информация о браузере или клиентском приложении.
- **Accept** — типы данных, которые клиент готов принять (например, `text/html`, `application/json`).
- **Authorization** — используется для передачи данных авторизации (например, токенов).

#### Заголовки ответа:
- **Content-Type** — тип данных, передаваемых в ответе (например, `text/html`, `application/json`).
- **Content-Length** — длина тела ответа в байтах.
- **Set-Cookie** — устанавливает куки в браузере клиента.
- **Cache-Control** — управляет кэшированием данных (например, `no-cache`).

---

### Дополнительная информация

1. **Кэширование**:
   - Сервер и клиент могут кэшировать данные, чтобы уменьшить нагрузку на сеть.
   - **Заголовки кэширования**: `Cache-Control`, `Expires`, `ETag`.

2. **Редиректы**:
   - Редиректы используются для перенаправления клиента с одного URL на другой.
   - Пример ответа с редиректом:
   
```http
HTTP/1.1 301 Moved Permanently
Location: https://www.new-example.com/
```

3. **Куки (Cookies)**:
   - Куки используются для хранения данных сессии и аутентификации.
   - Устанавливаются с помощью заголовка `Set-Cookie`.